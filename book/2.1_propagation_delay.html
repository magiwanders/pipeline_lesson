<!DOCTYPE HTML>
<html lang="it" class="sidebar-visible no-js ayu">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Consequences of a Non-Negligible Propagation Delay - Introduction to Pipelining</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="scrollbar.css">
        <link rel="stylesheet" href="loader.css">
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "ayu";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('ayu')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="0_navigating_this_lesson.html"><strong aria-hidden="true">1.</strong> Navigating This Lesson</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="0.1_vm_setup.html"><strong aria-hidden="true">1.1.</strong> Virtual Machine Setup</a></li><li class="chapter-item expanded "><a href="0.2_important_info.html"><strong aria-hidden="true">1.2.</strong> Important Info on the Virtual Machine</a></li><li class="chapter-item expanded "><a href="0.3_pretest.html"><strong aria-hidden="true">1.3.</strong> Pre-test</a></li></ol></li><li class="chapter-item expanded "><a href="1_prerequisites.html"><strong aria-hidden="true">2.</strong> Prerequisites</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="1.1_exercises.html"><strong aria-hidden="true">2.1.</strong> Review of RISC-V Instruction Set, 2's complement and Hex Calculations</a></li><li class="chapter-item expanded "><a href="1.3_components_review.html"><strong aria-hidden="true">2.2.</strong> Review of Single Cycle Processor Components</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="1.4_single_register.html"><strong aria-hidden="true">2.2.1.</strong> Single Register</a></li><li class="chapter-item expanded "><a href="1.5_rom.html"><strong aria-hidden="true">2.2.2.</strong> ROM</a></li><li class="chapter-item expanded "><a href="1.6_register_file.html"><strong aria-hidden="true">2.2.3.</strong> Register File</a></li><li class="chapter-item expanded "><a href="1.7_pc.html"><strong aria-hidden="true">2.2.4.</strong> PC</a></li><li class="chapter-item expanded "><a href="1.8_alu.html"><strong aria-hidden="true">2.2.5.</strong> ALU</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="2_timing.html"><strong aria-hidden="true">3.</strong> Circuit Timing (contains SHEAS Tutorial)</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="2.1_propagation_delay.html" class="active"><strong aria-hidden="true">3.1.</strong> Consequences of a Non-Negligible Propagation Delay</a></li><li class="chapter-item expanded "><a href="2.3_rtl.html"><strong aria-hidden="true">3.2.</strong> Review of Register Transfer Level (RTL) abstraction</a></li><li class="chapter-item expanded "><a href="2.5_diagramma_rtl.html"><strong aria-hidden="true">3.3.</strong> A Diagram for Graphing the Dynamic Behaviour of RTL Circuits</a></li><li class="chapter-item expanded "><a href="2.6_pipeline.html"><strong aria-hidden="true">3.4.</strong> Introduction to the Pipelined Processor</a></li></ol></li><li class="chapter-item expanded "><a href="3_building_the_pipeline.html"><strong aria-hidden="true">4.</strong> Building the Pipelined Processor (contains Ripes Tutorial)</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="3.1_from_singlecycle.html"><strong aria-hidden="true">4.1.</strong> Grouping the Components of the Single-Cycle Processor</a></li><li class="chapter-item expanded "><a href="3.4_stages.html"><strong aria-hidden="true">4.2.</strong> An Overview of how Each Inctruction Activates Each Stage</a></li></ol></li><li class="chapter-item expanded "><a href="4_demos.html"><strong aria-hidden="true">5.</strong> Towards Hazards</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="4.1_simple_meaningless_program.html"><strong aria-hidden="true">5.1.</strong> DEMO - Meaningless Program</a></li><li class="chapter-item expanded "><a href="4.2_towards_hazards.html"><strong aria-hidden="true">5.2.</strong> DEMO - Program Towards Hazards</a></li><li class="chapter-item expanded "><a href="4.3_assignments.html"><strong aria-hidden="true">5.3.</strong> Assignment on Hazards</a></li></ol></li><li class="chapter-item expanded "><a href="5_appendix.html"><strong aria-hidden="true">6.</strong> RV32IMAC Cheat Sheet</a></li><li class="chapter-item expanded "><a href="5.1_posttest.html"><strong aria-hidden="true">7.</strong> Post-test</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu (default)</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Introduction to Pipelining</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="consequences-of-a-non-negligible-propagation-delay"><a class="header" href="#consequences-of-a-non-negligible-propagation-delay">Consequences of a Non-Negligible Propagation Delay</a></h1>
<p>This part of the lesson deals with the delay with which logic gates calculate their output, which is not zero. This propagation delay, which we often ignore, has consequences on the maximum clock frequency of any processor.</p>
<iframe width="100%" height="500" src="https://www.youtube.com/embed/tabjllLuzNI" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<div id="sheas_container_1"><div style="width:100%; height:100%"><div class="loader"></div></div></div>
<h2 id="exercises"><a class="header" href="#exercises">Exercises</a></h2>
<ol>
<li>
<p>Conduct a qualitative analysis of the full adder circuit similar to that done for the xnor gate in the previous lesson. What propagation delay do you estimate?
<a href="https://sheas.magiwanders.com/?chip=N4IgJgpgbglgxhAziAXKSUCMrQBsCGARhLqiAGYCuuuA%2BvmJAE60AMIANCAC4CeADhDIBlSoTgwmcSjG6cQ%2FJgHt%2B%2BAOb5uMJQDtUrLghp9BZKjXqMITefyWJZ2vWhAAPVACYA7AFYuvVABaHwBfEK4MDxwQAmJSFBB8eRMhBIAhSm5uXVtlVQ0tHJQDEB1KAFtCfERUkAALCHcuQllkFEwuHQg5BKSuOwdC51B3FB8SgJRAgDZWMIjoAGZo2JIyQmSBWoysnP689U0nfU6KqpqyBqaQFu42jtLu9dt7RyKR1HH%2FVEw58PBoAAWFZENYJOCbUzpTLZPT7FSHIYnUpnaq1K7yW73TpPcEvQbHFyjL4gSa%2BeYAqA%2BEFxMiICqQ2oAGXw5X4uQRBUJJTKlTRl0amNaPxxPRA9PK%2BLewzcqEBXgmnz%2BCyg0xpYJAcHwTCYAS4KTILLZHPyRyKPNRFwSGOawvaorIWp1eoUryRRLlCu%2BU0WoQpcF0XTg2SYbQA2qByMpJS4YGAyBhsP0lEwxRKQP9stE4wnoNTk6myDA9PNI9Hs%2FGEomXoXwdrdRn9UoK7nVTWxcWM%2BEy0oY6Ac1XoFEC2KlJlGzxm7HK5Sk67a4kuxwe32QAPKcsR2Qx3JM1P%2BzPq1uEhtSxRy9PW8DjyAdxOs5fB1h246uwBdLj08SSaR20Ap6IMHgJBAOgbAXFWeJF31LYyB2WETURblTj5K16kFW07hFR4xT6V0CXeWVim9ZVKSiCDQSgu8YKhEAjXZeFTXdC1UPRDCbjtB4ulHcdkwImVRkWAAORUUEWUiMGWCjaQSHR8B0MA2EZMgADl5PjRikKKB4sWw4t%2BEyNoPD46VolGTAPD8UlPgpDBgWkjU5IU2g5wNBI1IUxCuW0zDsTXHQDKwlBjPw0yPXaSzvR8P0VWpByoI2GjthhPYFAObznBY842OuXT7Rw54TPdD5iOslBZls6A1XisgnMU4ceFg9z1K8s1nB0ziuH0wzPCKwkSssqzJnEsJ%2FgDHQgxDcMVxbJ85zsBc7z3WaNxfBJi2wM8o17FaMDVG8lqbXahzW%2Fylxmx9KXzeceN3I7Lrs07iyiLaLwPVtroW27733NdDyBJ6dE27tzx2h6wNOw7J2OqBNxuosdBekHttXddJMh8dlvBtsbw287QdR%2F6oGveGEihh93qffbSf8pG33%2BFqXCAhA2nQCGat6ZToV2OE0s5NrkV5bKBVyzqCs5vrCNGUSJJOjnb14xraPo1rmJQ4XrXYvKuNxBW5ElgS5V9b0Rv%2BdH5bqpSktUlrNIy7Dta6gKeuCg2zJ%2BY2ytNlV7LwSjavUlyuZADyNL5pjCQ6oKHm6oKQoGMKBpEk3ZapdUEuD%2BDUsUfm1ZRViRaFaOHRPKViqI0SKv9QMIGDFNpoJmH5pTb6scp1bcaB%2FGUZhz6W%2B3TH7vb9HO6R5dG%2BxuGvoHu7oexknp%2FWrvXrB4elgx2eKb%2Bq9AbHi61%2BJjefphhrF7OsJ6c6JQejZ2AWdA595c7a3uYQu2BdKoX%2BU10Xi%2FFs63bhRlpVKA5E%2FYyT1sHFW7885fzQjaDif9uIzzLv1Ii3ghr6BAVJcBjlA7sBfiHW24ctLtV8npZ2cdAElQspg4oo1DA1zrqGVAEYJ4Hynv3Mmg854H1Plw8%2ByM3rbzmkfNuIiO40zxivQmrZm6LR4VvNG69R7vn%2BK4ACTNoDAVZrOdO24WAEKVrUUQ34pAyH1iQ%2B2pUjC4DcreGw1CiI%2BE9pMQEMUyL6N6M5Ix9jTESHMbIVWyFNQkDsU1RInknGCS9GVDx5tcFQUDq5CJ%2FifwWOCeaQwYT7HEITuXGJokhLxIBhba%2BVtjEiDEAE38lic4RyyaE4wESdDX1QVLH4sxvSWRAXFRJtVykpNomkwJdT0ofxKLY%2BxrS6lujQeZLpZURIgOqv0iWlTX7Z3GbAy0OUi5%2BWQes%2FJ8zkSTGCCArwXibiZxSrzeppDBa7MLuQ%2FKhzrnRNOT8VgqchJXJ3BU%2Bx0CrETPVt%2FdCv8Dm62oqFApqBpjFKin8MaTCpqsP3hIvaYih4YoBp3buwjlFQEuQdRRv1CV9wXJ2GRvcsW8JxaA06p4hGr3pdTM%2B5MyVE34QuJI1LsbEpphymGnCFxMvHj3eetKlFExFbhfFLLCWypQeIwl8ixRivRYS7lrdsWqtOry5lsjREks3py1svy8UX3%2BHUfAuByCWGYA%2FHRD9wJrOghskAWc7nbJCXAvZLydZyo%2BaVSYqcwExH9qXQhXrMmZVBfArWYs3mJRhSckNqAACcJTYZXPTIQoF9zrFZTBQgx2%2F882po6WJVgdDMDZt9hGiBToGz5tZAxYFOyC4%2F32dhN5zaXTHKreJOhxTelXI0YY4OIzamxuRFMiJE72mG3aNFKKKyrn4KndU9JQSYEhPnbRPJcyq11pHUixhE1a6opQGwiVB81XKt1UTClcq%2BV8KlWap8L7nhvvpQ%2B7hpqYZsoEQa8VBKuUfqA4y%2BVRrKTAYUYByVlrDU0pNcfSegM1FcHMHQBgjqtF3xAgR11jaNQpgBak7dozZ02JyREgCwbhKiUCBZMNVybV2oddYCjwyqMzr3Y0g96JbX2rw9YJd7sxJ0JYx4VOODSNQQ46JqwLAhkmL4xkgTcamnhNokprjjjK3Lo8JFMqLHvkgIbZBMgeF7Exq048rt4Ke2vN1nhQdy7zPMcwO4sd8sU12duTR4tCaIW9t1imjzkmvPekCKOs2VUrkQmjUFhzn8nndoDSXTUEnwoxbMz0hLRLc0MlbcaNLIX%2FWIMhWmUrRnJMuOY9MbNvz5b9qgW24L8aqtlr7fWAdx7l2Ndi5gOtDDNQovrmi9hf7IPYwtVIksKHsbarpAyFVMr9UweFaddMG3WwCrPlS5bB8F4CKFStrbv7yVzffTeDVM3CXwZ1XSxV0HrubZvO1%2FbxqaYPbvfS1bdZnTofvVdkI9MwhAA%3D" target="_blank">Here is an isolated full adder circuit, of which there are many inside the incrementer.</a></p>
</li>
<li>
<p>Does the overall propagation delay of the incrementer chip change for different inputs? If yes, with which criteria?</p>
</li>
</ol>
<h2 id="transcript"><a class="header" href="#transcript">Transcript</a></h2>
<p>When logic gates are studied, there are usually two different ways to communicate their functionality. </p>
<p>One is the truth table, that is the complete list of outputs given the list of all the possible combinations of inputs. Some examples of this are the nand gate, the truth table of which shows the output only deactivating when the inputs are both on, or the xnor gate, whose output is active only when the two inputs have the same value. The other way of communicating functionality, is the way we just used to describe the truth table of the first two gates, that is a functional description in plain english. This is often preferred for the sake of brevity with gates that have many possible inputs, but a simple rule to calculate the output: this is the case of the incrementer chip here, which has 256 possible inputs, since the input port is 8 bits wide, but its output can simply be described as &quot;the input plus one&quot; for any given input. </p>
<p>Whichever way the gates were described with, there is one further detail that is often omitted or quickly touched upon and not really cared about: the output of each gate is always calculated with a small but measurable delay, with respect to the input variation. This is called propagation delay. Thankfully, this tool is granular enough to show it. </p>
<p>Inspect the inputs and the output of the nand gate and then pause the simulation. Zoom in on the monitors so that you can comfortably see each step. Now let us fiddle with the inputs, and try to understand how many steps it takes to calculate the output given any input variation. It takes one step, and you can verify all the combinations by yourself. </p>
<p>How long one step is is rather unimportant, it might be one millisecond or one nanoseconds, for our purposes that is not important: it is the smallest time division of the engine of our simulator, and might as well be the smallest time interval we can measure with a logic analyzer, in the real world.</p>
<p>We can do the same with the xnor gate. We notice that sometimes the output takes five steps to propagate, as it is the case with inputs changing from zero zero to zero one, and sometimes six steps, as it is the case with inputs changing from zero zero to one one. We can therefore say that the propagation delay of the xnor is six steps. Why then is this value higher than the propagation delay of the nand gate? Let us remember that the nand gate is what is called a universal gate, which means that it can be used to synthetize any other logic gate, like this xnor here, that just so happens to be synthetized out of nand. The longer propagation delay of the xnor, is therefore directly proportional to the complexity of its implementation in nand gates, and we have also verified it being variable with previous input. </p>
<p>Let us spend two minutes for a qualitative analysis, of how the inner structure of this xnor chip results in the propagation delay we observed. We see the inner structure being made of 'and', 'not' and 'or' gates. Internally the not is made of a single nand port with shortcircuited inputs, which means that its propagation delay is the same, one step. The and gate is made of two nand gates in series, so it is rather intuitive that its propagation delay will be two steps. The same can be said about the or gate, which has a maximum of two nand gates in series between any of the inputs and the output. The structure of the xnor gate is slightly more complex, but we only have to understand how to generalize the concept. Each input has two routes towards the output, one that is five steps long and one that is six steps long, as they both pass through a not gate, an or gate, an and gate and only one of the two passes through the first not gate. So without assumptions about the inputs, we can say that the maximum delay of the xnor gate is six steps.</p>
<p>Let us now consider the incrementer. You can see inspecting it that its a rather complex circuit, so we expect it to have a rather high maximum propagation delay. How much exactly? Let us set the input to decimal try some values. Zero to one takes 12 steps. 254 to 255 takes 4 steps. 127 to 128 takes many steps.</p>
<p>The exact propagation delay of this chip will be asked to you as an exercise, after this part of this lesson. I invite you to notice, that the carry of each full adder is given as input of the following full adder. You will be asked to reason about what that means for the total propagation delay and if, given this structure, the fact that one input of the adders is always one, somehow changes the delay estimate. </p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="2_timing.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="2.3_rtl.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="2_timing.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="2.3_rtl.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript" src="submodules/js_builds_html/html_builders.js"></script>
        <script type="text/javascript" src="submodules/paint2pic/p2p.js"></script>
        <script type="text/javascript" src="submodules/simple_hardware_editor_and_simulator/digitaljs_webpack_backup.js"></script>
        <script type="text/javascript" src="submodules/simple_hardware_editor_and_simulator/lz-string_backup.js"></script>
        <script type="text/javascript" src="submodules/simple_hardware_editor_and_simulator/sheas_functions.js"></script>
        <script type="text/javascript" src="submodules/simple_hardware_editor_and_simulator/sheas_builders.js"></script>
        <script type="text/javascript" src="lesson.js"></script>
    </body>
</html>
